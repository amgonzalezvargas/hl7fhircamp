<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Link Boostrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
        integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="Estilos.css">
    <title>Menú Calculadora</title>
</head>

<body>

    <!-- Ventana de Profesional -->
    <div class="container" id="containerLogin">
        <div class="Login">
            <h3 class="d-flex justify-content-center">Data Profesional</h3>
            <input type="hidden" id="hddnIdPractitioner">
            <label class="Id">ID: </label>
            <input class="form-control" type="text" autocomplete="off" id="txtIdProfesional">
            <label class="Nombre">NOMBRE: </label>
            <input type="text" class="form-control" autocomplete="off" id="txtNombreMedico">
            <label class="Id">REGISTRO MEDICO: </label> <!--Registro Medico-->
            <input type="text" class="form-control" autocomplete="off" id="txtRegistroMedico">
            <div class="d-flex justify-content-center">
                <button type="submit" id="btnRegistroProfesional">Siguiente</button>
            </div>
        </div>
    </div>




    <!-- Ventana de paciente -->
    <div class="container" id="containerPaciente" style="display: none;">
        <div class="p-4" style="border: 1px solid #ccc;    border-radius: 0.25rem;">
            <h3 class="d-flex justify-content-center">Data Paciente</h3>
            <input type="hidden" id="hddnIdPatient">
            <label class="Id">IDENTIFICACION:
                <input class="form-control" type="text" autocomplete="off" id="txtIdentificacionPaciente">
            </label>
            <label class="Id">TIPO IDENTIFICACION:</label>
            <select class="form-control" id="slcTipoIdentificacionPaciente">
                <option value="CC">CEDULA DE CIUDADANIA</option>
                <option value="PA">PASAPORTE</option>
                <option value="TI">TARJETA DE IDENTIDAD</option>
            </select>
            <label class="Id">NOMBRES:</label>
            <input class="form-control" type="text" autocomplete="off" id="txtNombresPaciente">
            <label class="Id">APELLIDOS:</label>
            <input class="form-control" type="text" autocomplete="off" id="txtApellidosPaciente">
            <label class="Id">SEXO:</label>
            <select class="form-control" id="slctSexoPaciente">
                <option value="M">MASCULINO</option>
                <option value="F">FEMENINO</option>
            </select>
            <label class="Id">EDAD:</label>
            <input class="form-control" type="number" autocomplete="off" id="txtEdadPaciente">
            <div class="d-flex justify-content-center">
                <button type="submit" id="btnRegistroPaciente">Siguiente</button>
            </div>
        </div>
    </div>




    <!-- Ventana de Formulario-->
    <div class="container MenuP " id="containerFormulario" style="display: none;max-width:700px;">
        <div class="Menu p-4">
            <h3 class="d-flex justify-content-center" style="padding-bottom: 6px;text-align: center;">Calculadora de
                Riesgo Cardiovascular
                y
                Metabolico</h3>
            <div class="row">
                <div class="col-4">
                    <label class="Id">Peso (Kg):</label>
                    <input class="form-control" id="txtPesoPaciente" placeholder="Peso Kg" />
                </div>
                <div class="col-4">
                    <label class="Id">Estatura (Cms):</label>
                    <input class="form-control" id="txtEstaturaPaciente" placeholder="Estatura Cms" />
                </div>
                <div class="col-4">
                    <label class="Id">Perimetro Abdominal (Cms):</label>
                    <input class="form-control" id="txtPerimetroAbdominalPaciente"
                        placeholder="Perimetro Abominal Cms" />
                </div>
                <div class="col-4">
                    <label class="Id">TA sistólica (mmHg):</label>
                    <input class="form-control" id="txtTASistolicaPaciente" placeholder="TA sistólica (mmHg)" />
                </div>
                <div class="col-4">
                    <label class="Id">Colesterol total (mg/dL):</label>
                    <input class="form-control" id="txtColesterolTotalPaciente"
                        placeholder="Colesterol total (mg/dL)" />
                </div>
                <div class="col-4">
                    <label class="Id">Colesterol HDL (mg/dL):</label>
                    <input class="form-control" id="txtColesterolHDLPaciente" placeholder="Colesterol HDL (mg/dL)" />
                </div>
                <div class="col-12">
                    <label class="Id">Realiza normalmente al menos 30 minutos diarios de actividad física?</label>
                    <select class="form-control" id="slctActividadFisicaPaciente">
                        <option value="">SELECCIONE</option>
                        <option value="0">NO</option>
                        <option value="1">SI</option>
                    </select>
                </div>
                <div class="col-12">
                    <label class="Id">Con qué frecuencia come frutas, verduras y hortalizas?</label>
                    <select class="form-control" id="slctAlimentacionFrutasVerdurasPaciente">
                        <option value="">SELECCIONE</option>
                        <option value="0">No</option>
                        <option value="1">A diario</option>
                    </select>
                </div>
                <div class="col-12">
                    <label class="Id">Le han recetado alguna vez medicamentos contra la Hipertensión Arterial?</label>
                    <select class="form-control" id="slctMedicacionHipertensionPaciente">
                        <option value="">SELECCIONE</option>
                        <option value="0">NO</option>
                        <option value="1">SI</option>
                    </select>
                </div>
                <div class="col-12">
                    <label class="Id">Fumador de cigarrillos:</label>
                    <select class="form-control" id="slctFumadorCigarrillosPaciente">
                        <option value="">SELECCIONE</option>
                        <option value="0">NO</option>
                        <option value="1">SI</option>
                    </select>
                </div>
                <div class="col-12">
                    <label class="Id">Le han detectado alguna vez niveles altos de glucosa en sangre:</label>
                    <select class="form-control" id="slctDiabetesPaciente">
                        <option value="">SELECCIONE</option>
                        <option value="0">NO</option>
                        <option value="1">SI</option>
                    </select>
                </div>
                <div class="col-12">
                    <label class="Id">Ha habido algún diagnóstico de Diabetes en su familia?</label>
                    <select class="form-control" id="slctDiagnosticoDiabetesEnFamiliaPaciente">
                        <option value="">SELECCIONE</option>
                        <option value="0">NO</option>
                        <option value="1">SI: abuelos, tios o primos hermanos (pero no padres, hermanos o hijos)
                        </option>
                        <option value="2">SI:padres, hermanos o hijos
                        </option>
                    </select>
                </div>
                <button class="btn-primary" type="submit" id="btnCalcularRiesgosPaciente"
                    style="margin-top: 10px;;">Calcular</button>
            </div>
            <div class="Botones" style="margin-top: 30px;;">
                <button class="btn-success" type="submit" id="btnVerRiesgoDelPaciente">Ver Riesgos Evaluados</button>
                <button class="btn-success" type="submit" id="btnEvaluarOtroPaciente">Evaluar Otro Paciente</button>
            </div>
        </div>
    </div>




    <!-- Container Load -->
    <div class="container" id="containerLoad" style="text-align: center;display: none;">
        <i class="fa-solid fa-spinner fa-spin fa-2xl"></i><br>
        <span id="labelLoad">123</span>
    </div>





    <!-- Container Resultados -->
    <div class="container" id="containerResultados" style="display: none;">
        <div class="Mensaje_F d-flex justify-content-center row m-3">
            <i class="fa-regular fa-circle-check" style="font-size: 5em;color: green;text-align: center;"></i>
        </div>
        <h2 class="d-flex justify-content-center" style="margin-bottom: 0rem; color: green;">Calculo exitoso</h2>
        <div class="d-flex justify-content-center row m-3" style="border: 1px solid #ccc; border-radius: 6px;">
            <p>Indice de masa corporal (IMC):</p>
            <div id="divIMC" style="text-align: center;font-size: 1.5em;"></div>
            <hr>
            <p>Perimetro Abdominal: </p>
            <div id="divPerimetroAbdominal" style="text-align: center;font-size: 1.5em;"></div>
            <hr>
            <p>Riesgo de Diabetes (Escala Findrisk):</p>
            <div id="divFindrisc" style="text-align: center;font-size: 1.5em;"></div>
            <hr>
            <p>Riesgo de infarto y ACV en los proximos 10 años (Escala Framingham):</p>
            <div id="divFramingham" style="text-align: center;font-size: 1.5em;"></div>
        </div>
        <div class="d-flex align-items-center justify-content-between" style="width: 100%;">
            <button class="btn-success" type="submit" id="btnVolverMenu">Volver al Menú</button>
        </div>
        <div class="d-flex align-items-center justify-content-between" style="width: 100%;">
            <button class="btn-success" type="submit" id="btnVolverMenuPacienteDesdeResultados">Nuevo Paciente</button>
        </div>
    </div>


    <div class="container" id="containerEvaluacionFindRisk" style="display: none;">
        <div class="Mensaje_F d-flex justify-content-center row m-3">
            <i class="fa-regular fa-circle-check" style="font-size: 5em;color: green;text-align: center;"></i>
        </div>

        <div class="d-flex align-items-center justify-content-between" style="width: 100%;">
            <button class="btn-success" type="submit" id="btnVolverMenuDesdeResultadosFindRisk">Volver al Menú</button>
        </div>
        <div class="d-flex align-items-center justify-content-between" style="width: 100%;">
            <button class="btn-success" type="submit" id="btnVolverMenuPacienteDesdeResultadosFindRisk">Nuevo
                Paciente</button>
        </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>

    <script src="jsFHIRPractitioner.js"></script>
    <script src="jsFHIRPatient.js"></script>
    <script src="jsRiesgoIMC.js"></script>
    <script src="jsRiesgoPerimetroAbdominal.js"></script>
    <script src="jsRiesgoFinrisk.js"></script>
    <script src="jsRiesgoFramingham.js"></script>
    <script src="jsFHIRFindRisk.js"></script>
    <script>
        $(document).ready(function () {
            $("#btnRegistroProfesional").click(function () {
                buscarProfesionalFHIR();
            });

            $("#btnRegistroPaciente").click(function () {
                if ($("#txtEdadPaciente").val() == "") {
                    alert("Ingrese Edad del paciente");
                    return;
                }
                buscarPacienteFHIR();
            });

            $("#btnEvaluarOtroPaciente, #btnVolverMenuPacienteDesdeResultados, #btnVolverMenuPacienteDesdeResultadosFindRisk").click(function () {
                $(".container").hide();
                $("#containerPaciente").show();
            });


            $("#btnVolverMenu, #btnVolverMenuDesdeResultadosFindRisk").click(function () {
                $("#containerResultados").hide();
                $("#containerFormulario").show();
            });


            $("#btnCalcularRiesgosPaciente").click(function () {
                if ($("#txtPesoPaciente").val() == "") {
                    alert("Ingrese Peso");
                    return;
                }
                if ($("#txtEstaturaPaciente").val() == "") {
                    alert("Ingrese talla");
                    return;
                }
                if ($("#txtPerimetroAbdominalPaciente").val() == "") {
                    alert("Ingrese Perimetro Abdominal");
                    return;
                }
                if ($("#txtTASistolicaPaciente").val() == "") {
                    alert("Ingrese TA Sistolica");
                    return;
                }
                if ($("#txtColesterolTotalPaciente").val() == "") {
                    alert("Ingrese Colesterol Total");
                    return;
                }
                if ($("#txtColesterolHDLPaciente").val() == "") {
                    alert("Ingrese Colesterol HDL");
                    return;
                }
                if ($("#slctActividadFisicaPaciente").val() == "") {
                    alert("Seleccione actividad fisica");
                    return;
                }
                if ($("#slctAlimentacionFrutasVerdurasPaciente").val() == "") {
                    alert("Seleccione frecunecia consumo frutas, verduras y hortalizas");
                    return;
                }
                if ($("#slctMedicacionHipertensionPaciente").val() == "") {
                    alert("Seleccione si le han recetado medicamentos contra la hipertension arterial");
                    return;
                }
                if ($("#slctDiabetesPaciente").val() == "") {
                    alert("Seleccione si le han detectado alguna vez niveles altos de glucosa en sangre");
                    return;
                }
                if ($("#slctDiagnosticoDiabetesEnFamiliaPaciente").val() == "") {
                    alert("Seleccione si ha habido algún diagnóstico de Diabetes en su familia");
                    return;
                }
                calcularRiesgoIMC();
                calcularRiesgoPerimetroAbdominal();
                calcularRiesgoFinrisk();
                calcularRiesgoFramingham();
                /*
                aca va el texto para enviar los datos a FHIR
                */
                /*
                presentacion del fomulario
                */
                $("#containerFormulario").hide();
                $("#containerResultados").show();
            })










        });
    </script>
</body>

</html>